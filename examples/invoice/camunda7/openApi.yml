openapi: 3.0.3
info:
  title: Invoice Example Process API
  version: '1.0'
  summary: "\n\nCreated at 21/08/2023, 16:33\n\n****\n\n> This is the invoice demo\
    \ application which is shipped with the full distributions.\n\nSee the original\
    \ [README](https://github.com/camunda/camunda-bpm-platform/tree/master/examples/invoice).\n\
    \nI bundled it here! Just run `InvoiceServletProcessApplication`.\n\nThis based\
    \ on this Project: https://github.com/pme123/spring-boot-datakurre-plugins\n\n\
    \n<details>\n<summary>**CHANGELOG.md**</summary>\n<p>\n\n\nAll notable changes\
    \ to this project will be documented in this file.\n\n* Types of Changes (L3):\n\
    \  * Added: new features\n  * Changed: changes in existing functionality\n  *\
    \ Deprecated: soon-to-be-removed features\n  * Removed: now removed features\n\
    \  * Fixed: any bug fixes\n  * Security: in case of vulnerabilities\n\n\nThe format\
    \ is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),\nand this\
    \ project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).\n\
    \n### Unreleased\nInitial Version\n\n</p>\n</details>\n\n\n<p/>\n<details>\n<summary>\n\
    <b><i>General Variables</i></b>\n</summary>\n\n<p>\n\n### Processes and ServiceProcesses\n\
    \n**outputMock**:\n\nMock this Service (`Out`) with:\n\n- DSL:\n```scala\nprocess(..)\
    \ // or serviceProcess(..)\n  .mockWith(outputMock)\n```\n\n- Json (you find examples\
    \ in each process):\n```json\n...\n\"outputMock\": {..},\n...\n```\n\n**servicesMocked**:\n\
    \nMock the ServiceProcesses (Workers only) with their default Mock:\n\n- DSL:\n\
    ```scala\nprocess(..) // or serviceProcess(..)\n  .mockServices\n```\n\n- Json:\n\
    ```json\n...\n\"servicesMocked\": true,\n...\n```\n\n**impersonateUserId**:\n\n\
    User-ID of a User that should be taken to authenticate to the services.\nThis\
    \ must be supported by your implementation. *Be caution: this may be a security\
    \ issue!*.\nIt is helpful if you have Tokens that expire, but long running Processes.\n\
    \n- DSL:\n```scala\nprocess(..) // or serviceProcess(..)\n  .withImpersonateUserId(impersonateUserId)\n\
    ```\n\n- Json:\n```json\n...\n\"impersonateUserId\": \"myUserName\",\n...\n```\n\
    \n### ServiceProcesses\n**outputServiceMock**:\n\nMock the Inner-Service (`MockedServiceResponse[ServiceOut]`).\n\
    \n- DSL:\n```scala\nserviceProcess(..)\n  .mockServiceWith(MockedServiceResponse\n\
    \     .success200(inOut.defaultServiceMock))\n```\n\n- Json (you find examples\
    \ in each process):\n```json\n...\n\"outputServiceMock\": {\n  \"respStatus\"\
    \ : 200,\n  \"respBody\" : \"Example String Body\",\n  \"respHeaders\" : [\n \
    \ ]\n},\n...\n```\n\n**handledErrors**:\n\nA list of error codes that are handled\
    \ (`BpmnError`)\n\n- DSL:\n```scala\nserviceProcess(..)\n  .handleError(\"400\"\
    )\n  .handleError(\"404\")\n```\n\n- Json\n```json\n...\n\"handledErrors\": Seq[String]\
    \ = [\"400\", \"404\"],\n...\n```\n\n**regexHandledErrors**:\n\nHandling Errors\
    \ with the messages that match a list of Regex expressions\n\n- DSL:\n```scala\n\
    serviceProcess(..)\n  .handleErrorWithRegex(\"SQL exception\")\n  .handleErrorWithRegex(\"\
    \\\"errorNr\\\":\\\"20000\\\"\")\n```\n\n- Json:\n```json\n...\n\"regexHandledErrors\"\
    : [\"SQL exception\", \"\\\"errorNr\\\":\\\"20000\\\"\"]\n...\n```\n\n</p>\n</details>\n\
    <p/>\n        \n"
paths:
  /process/example-invoice-c7:
    head:
      tags:
      - example-invoice-c7
      summary: 'Process: example-invoice-c7'
      description: "This starts the Invoice Receipt Process.\n\n- Input:  `camundala.examples.invoice.InvoiceReceipt\
        \ > In`\n- Output: `camundala.examples.invoice.InvoiceReceipt > Out`\n\n\n\
        <div class=\"diagramCanvas\">\n  <div class=\"diagram\" id=\"example-invoice-c7-93288\"\
        >\n    <img onLoad=\"openFromUrl('example-invoice-c7.bpmn', new BpmnJS({ container:\
        \ $('#example-invoice-c7-93288'), height: '95%', width: '95%' }));\" src=\"\
        data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==\"\
        \ />\n  </div>\n</div>\n\nDownload: [example-invoice-c7.bpmn](diagrams/example-invoice-c7.bpmn)\n\
        \n<p/>\n\n<details>\n<summary>\n<b><i>Mocking Examples</i></b>\n</summary>\n\
        \n<p>\n\n**outputMock**: \n\n```json\n...\n\"outputMock\": {\n  \"approved\"\
        \ : true,\n  \"clarified\" : null\n},\n...\n```\n\n</p>\n</details>\n</p>\n\
        \      "
      operationId: 'Process: example-invoice-c7'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/In'
            examples:
              example-invoice-c7:
                value:
                  creditor: Great Pizza for Everyone Inc.
                  amount: 300.0
                  invoiceCategory: Travel Expenses
                  invoiceNumber: I-12345
        required: true
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Out1'
              examples:
                example-invoice-c7:
                  value:
                    approved: true
  /decisiondmn/example-invoice-c7/example-invoice-c7-assignApprover:
    head:
      tags:
      - example-invoice-c7
      summary: 'DecisionDmn: example-invoice-c7-assignApprover'
      description: |+
        Decision Table on who must approve the Invoice.

        - Input:  `camundala.examples.invoice.InvoiceReceipt > InvoiceAssignApproverDMN > In`
        - Output: `camundala.bpmn.CollectEntries`


        <div class="diagramCanvas">
          <div class="diagram" id="example-invoice-c7-assignApprover-18202">
            <img onLoad="openFromUrl('example-invoice-c7-assignApprover.dmn', new DmnJS({ container: $('#example-invoice-c7-assignApprover-18202'), height: '95%', width: '95%' }));" src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" />
          </div>
        </div>

        Download: [example-invoice-c7-assignApprover.dmn](diagrams/example-invoice-c7-assignApprover.dmn)

      operationId: 'DecisionDmn: example-invoice-c7-assignApprover'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/In1'
            examples:
              example-invoice-c7-assignApprover:
                value:
                  amount: 30.0
                  invoiceCategory: Software License Costs
              budget:
                value:
                  amount: 30.0
                  invoiceCategory: Software License Costs
              day-to-day expense:
                value:
                  amount: 125.0
                  invoiceCategory: Misc
              exceptional:
                value:
                  amount: 12345.0
                  invoiceCategory: Misc
        required: true
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CollectEntries_camundala.examples.invoice.InvoiceReceipt.ApproverGroup[]'
              examples:
                example-invoice-c7-assignApprover:
                  value:
                  - management
  /usertask/example-invoice-c7/ApproveInvoiceUT:
    head:
      tags:
      - example-invoice-c7
      summary: 'UserTask: ApproveInvoiceUT'
      description: |-
        Approve the invoice (or not).

        - Input:  `camundala.examples.invoice.InvoiceReceipt > PrepareBankTransferUT > In`
        - Output: `camundala.examples.invoice.InvoiceReceipt > ApproveInvoiceUT > Out`
      operationId: 'UserTask: ApproveInvoiceUT'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/In2'
            examples:
              ApproveInvoiceUT:
                value:
                  creditor: Great Pizza for Everyone Inc.
                  amount: 300.0
                  invoiceCategory: Travel Expenses
                  invoiceNumber: I-12345
        required: true
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Out2'
              examples:
                ApproveInvoiceUT:
                  value:
                    approved: true
                Invoice approved:
                  value:
                    approved: true
                Invoice NOT approved:
                  value:
                    approved: false
  /usertask/example-invoice-c7/PrepareBankTransferUT:
    head:
      tags:
      - example-invoice-c7
      summary: 'UserTask: PrepareBankTransferUT'
      description: |-
        Prepare the bank transfer in the Financial Accounting System.

        - Input:  `camundala.examples.invoice.InvoiceReceipt > PrepareBankTransferUT > In`
        - Output: `camundala.domain.NoOutput`
      operationId: 'UserTask: PrepareBankTransferUT'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/In2'
            examples:
              PrepareBankTransferUT:
                value:
                  creditor: Great Pizza for Everyone Inc.
                  amount: 300.0
                  invoiceCategory: Travel Expenses
                  invoiceNumber: I-12345
        required: true
      responses:
        '200':
          description: ''
  /process/example-invoice-c7-review:
    head:
      tags:
      - example-invoice-c7-review
      summary: 'Process: example-invoice-c7-review'
      description: "This starts the Review Invoice Process.\n\n- Input:  `camundala.examples.invoice.ReviewInvoice\
        \ > In`\n- Output: `camundala.examples.invoice.ReviewInvoice > Out`\n\n\n\
        <div class=\"diagramCanvas\">\n  <div class=\"diagram\" id=\"example-invoice-c7-review-46083\"\
        >\n    <img onLoad=\"openFromUrl('example-invoice-c7-review.bpmn', new BpmnJS({\
        \ container: $('#example-invoice-c7-review-46083'), height: '95%', width:\
        \ '95%' }));\" src=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==\"\
        \ />\n  </div>\n</div>\n\nDownload: [example-invoice-c7-review.bpmn](diagrams/example-invoice-c7-review.bpmn)\n\
        \n<p/>\n\n<details>\n<summary>\n<b><i>Mocking Examples</i></b>\n</summary>\n\
        \n<p>\n\n**outputMock**: \n\n```json\n...\n\"outputMock\": {\n  \"clarified\"\
        \ : true\n},\n...\n```\n\n</p>\n</details>\n</p>\n      "
      operationId: 'Process: example-invoice-c7-review'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/In3'
            examples:
              example-invoice-c7-review:
                value:
                  creditor: Great Pizza for Everyone Inc.
                  amount: 300.0
                  invoiceCategory: Travel Expenses
                  invoiceNumber: I-12345
        required: true
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Out'
              examples:
                example-invoice-c7-review:
                  value:
                    clarified: true
  /usertask/example-invoice-c7-review/AssignReviewerUT:
    head:
      tags:
      - example-invoice-c7-review
      summary: 'UserTask: AssignReviewerUT'
      description: |-
        Select the Reviewer.

        - Input:  `camundala.examples.invoice.InvoiceReceipt > PrepareBankTransferUT > In`
        - Output: `camundala.examples.invoice.ReviewInvoice > AssignReviewerUT > Out`
      operationId: 'UserTask: AssignReviewerUT'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/In2'
            examples:
              AssignReviewerUT:
                value:
                  creditor: Great Pizza for Everyone Inc.
                  amount: 300.0
                  invoiceCategory: Travel Expenses
                  invoiceNumber: I-12345
        required: true
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Out3'
              examples:
                AssignReviewerUT:
                  value:
                    reviewer: John
  /usertask/example-invoice-c7-review/ReviewInvoiceUT:
    head:
      tags:
      - example-invoice-c7-review
      summary: 'UserTask: ReviewInvoiceUT'
      description: |-
        Review Invoice and approve.

        - Input:  `camundala.examples.invoice.InvoiceReceipt > PrepareBankTransferUT > In`
        - Output: `camundala.examples.invoice.ReviewInvoice > ReviewInvoiceUT > Out`
      operationId: 'UserTask: ReviewInvoiceUT'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/In2'
            examples:
              ReviewInvoiceUT:
                value:
                  creditor: Great Pizza for Everyone Inc.
                  amount: 300.0
                  invoiceCategory: Travel Expenses
                  invoiceNumber: I-12345
        required: true
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Out4'
              examples:
                ReviewInvoiceUT:
                  value:
                    clarified: true
                Invoice clarified:
                  value:
                    clarified: true
                Invoice NOT clarified:
                  value:
                    clarified: false
  /serviceprocess/Services/ArchiveInvoiceService:
    head:
      tags:
      - Services
      summary: 'ServiceProcess: ArchiveInvoiceService'
      description: "\n\nArchives the Receipt.\n\n- Input:  `camundala.examples.invoice.ArchiveInvoice\
        \ > In`\n- Output: `camundala.examples.invoice.ArchiveInvoice > Out`\n- ServiceOut:\
        \  `Seq[java.lang.String]`\n<p/>\n\n<details>\n<summary>\n<b><i>Mocking Examples</i></b>\n\
        </summary>\n\n<p>\n\n**outputMock**: \n\n```json\n...\n\"outputMock\": {\n\
        \  \"archived\" : true\n},\n...\n```\n\n**outputServiceMock**: \n```json\n\
        ...\n\"outputServiceMock\": {\n  \"respStatus\" : 200,\n  \"respBody\" : [\n\
        \    \"someIdJustForDemo\"\n  ],\n  \"respHeaders\" : [\n  ]\n},\n...\n```\n\
        </p>\n</details>\n</p>\n      \n    "
      operationId: 'ServiceProcess: ArchiveInvoiceService'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/In4'
            examples:
              ArchiveInvoiceService:
                value:
                  shouldFail: true
        required: true
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Out5'
              examples:
                ArchiveInvoiceService:
                  value:
                    archived: true
  /usertask/UserTasks/ApproveInvoiceUT:
    head:
      tags:
      - User Tasks
      summary: 'UserTask: ApproveInvoiceUT'
      description: |-
        Approve the invoice (or not).

        - Input:  `camundala.examples.invoice.InvoiceReceipt > PrepareBankTransferUT > In`
        - Output: `camundala.examples.invoice.InvoiceReceipt > ApproveInvoiceUT > Out`
      operationId: 'UserTask: ApproveInvoiceUT'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/In2'
            examples:
              ApproveInvoiceUT:
                value:
                  creditor: Great Pizza for Everyone Inc.
                  amount: 300.0
                  invoiceCategory: Travel Expenses
                  invoiceNumber: I-12345
        required: true
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Out2'
              examples:
                ApproveInvoiceUT:
                  value:
                    approved: true
                Invoice approved:
                  value:
                    approved: true
                Invoice NOT approved:
                  value:
                    approved: false
  /usertask/UserTasks/PrepareBankTransferUT:
    head:
      tags:
      - User Tasks
      summary: 'UserTask: PrepareBankTransferUT'
      description: |-
        Prepare the bank transfer in the Financial Accounting System.

        - Input:  `camundala.examples.invoice.InvoiceReceipt > PrepareBankTransferUT > In`
        - Output: `camundala.domain.NoOutput`
      operationId: 'UserTask: PrepareBankTransferUT'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/In2'
            examples:
              PrepareBankTransferUT:
                value:
                  creditor: Great Pizza for Everyone Inc.
                  amount: 300.0
                  invoiceCategory: Travel Expenses
                  invoiceNumber: I-12345
        required: true
      responses:
        '200':
          description: ''
  /usertask/UserTasks/AssignReviewerUT:
    head:
      tags:
      - User Tasks
      summary: 'UserTask: AssignReviewerUT'
      description: |-
        Select the Reviewer.

        - Input:  `camundala.examples.invoice.InvoiceReceipt > PrepareBankTransferUT > In`
        - Output: `camundala.examples.invoice.ReviewInvoice > AssignReviewerUT > Out`
      operationId: 'UserTask: AssignReviewerUT'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/In2'
            examples:
              AssignReviewerUT:
                value:
                  creditor: Great Pizza for Everyone Inc.
                  amount: 300.0
                  invoiceCategory: Travel Expenses
                  invoiceNumber: I-12345
        required: true
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Out3'
              examples:
                AssignReviewerUT:
                  value:
                    reviewer: John
  /usertask/UserTasks/ReviewInvoiceUT:
    head:
      tags:
      - User Tasks
      summary: 'UserTask: ReviewInvoiceUT'
      description: |-
        Review Invoice and approve.

        - Input:  `camundala.examples.invoice.InvoiceReceipt > PrepareBankTransferUT > In`
        - Output: `camundala.examples.invoice.ReviewInvoice > ReviewInvoiceUT > Out`
      operationId: 'UserTask: ReviewInvoiceUT'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/In2'
            examples:
              ReviewInvoiceUT:
                value:
                  creditor: Great Pizza for Everyone Inc.
                  amount: 300.0
                  invoiceCategory: Travel Expenses
                  invoiceNumber: I-12345
        required: true
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Out4'
              examples:
                ReviewInvoiceUT:
                  value:
                    clarified: true
                Invoice clarified:
                  value:
                    clarified: true
                Invoice NOT clarified:
                  value:
                    clarified: false
  /decisiondmn/DMNs/example-invoice-c7-assignApprover:
    head:
      tags:
      - DMNs
      summary: 'DecisionDmn: example-invoice-c7-assignApprover'
      description: |+
        Decision Table on who must approve the Invoice.

        - Input:  `camundala.examples.invoice.InvoiceReceipt > InvoiceAssignApproverDMN > In`
        - Output: `camundala.bpmn.CollectEntries`


        <div class="diagramCanvas">
          <div class="diagram" id="example-invoice-c7-assignApprover-81669">
            <img onLoad="openFromUrl('example-invoice-c7-assignApprover.dmn', new DmnJS({ container: $('#example-invoice-c7-assignApprover-81669'), height: '95%', width: '95%' }));" src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" />
          </div>
        </div>

        Download: [example-invoice-c7-assignApprover.dmn](diagrams/example-invoice-c7-assignApprover.dmn)

      operationId: 'DecisionDmn: example-invoice-c7-assignApprover'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/In1'
            examples:
              example-invoice-c7-assignApprover:
                value:
                  amount: 30.0
                  invoiceCategory: Software License Costs
        required: true
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CollectEntries_camundala.examples.invoice.InvoiceReceipt.ApproverGroup[]'
              examples:
                example-invoice-c7-assignApprover:
                  value:
                  - management
                budget:
                  value:
                  - management
                day-to-day expense:
                  value:
                  - accounting
                  - sales
components:
  schemas:
    ApproverGroup:
      oneOf:
      - $ref: '#/components/schemas/accounting'
      - $ref: '#/components/schemas/management'
      - $ref: '#/components/schemas/sales'
    CollectEntries_camundala.examples.invoice.InvoiceReceipt.ApproverGroup[]:
      oneOf:
      - $ref: '#/components/schemas/ApproverGroup'
    In:
      required:
      - creditor
      - amount
      - invoiceCategory
      - invoiceNumber
      type: object
      properties:
        creditor:
          type: string
        amount:
          type: number
          format: double
        invoiceCategory:
          $ref: '#/components/schemas/InvoiceCategory'
        invoiceNumber:
          type: string
        shouldFail:
          type: boolean
          description: You can let the Archive Service fail for testing.
        invoiceReviewedMock:
          $ref: '#/components/schemas/Out'
    In1:
      required:
      - amount
      - invoiceCategory
      type: object
      properties:
        amount:
          type: number
          format: double
        invoiceCategory:
          $ref: '#/components/schemas/InvoiceCategory'
    In2:
      required:
      - creditor
      - amount
      - invoiceCategory
      - invoiceNumber
      type: object
      properties:
        creditor:
          type: string
        amount:
          type: number
          format: double
        invoiceCategory:
          $ref: '#/components/schemas/InvoiceCategory'
        invoiceNumber:
          type: string
      description: Same Input as _InvoiceReceipt_, only without mocking - no mocking
        in UserTasks
    In3:
      required:
      - creditor
      - amount
      - invoiceCategory
      - invoiceNumber
      type: object
      properties:
        creditor:
          type: string
        amount:
          type: number
          format: double
        invoiceCategory:
          $ref: '#/components/schemas/InvoiceCategory'
        invoiceNumber:
          type: string
        shouldFail:
          type: boolean
          description: You can let the Archive Service fail for testing.
      description: Same Input as _InvoiceReceipt_, only different Mocking
    In4:
      required:
      - shouldFail
      type: object
      properties:
        shouldFail:
          type: boolean
    InvoiceCategory:
      oneOf:
      - $ref: '#/components/schemas/Misc'
      - $ref: '#/components/schemas/Software License Costs'
      - $ref: '#/components/schemas/Travel Expenses'
    Misc:
      type: object
    Out:
      required:
      - clarified
      type: object
      properties:
        clarified:
          type: boolean
          description: Flag that is set by the Reviewer
      description: |
        You can mock the response variables of this (sub)process.

        Class: `camundala.examples.invoice.ReviewInvoice > Out`

        Here an example:

        ```scala
        {
          "clarified" : true
        }
        ```

        General to mocking:

        - `outputMock` mocks this process.
        - `someSubProcessMock` mocks a sub process
    Out1:
      required:
      - approved
      type: object
      properties:
        approved:
          type: boolean
          description: If true, the Boss accepted the Invoice
        clarified:
          type: boolean
          description: Flag that is set by the Reviewer (only set if there was a review).
    Out2:
      required:
      - approved
      type: object
      properties:
        approved:
          type: boolean
          description: If true, the Boss accepted the Invoice
      description: Every Invoice has to be accepted by the Boss.
    Out3:
      required:
      - reviewer
      type: object
      properties:
        reviewer:
          type: string
    Out4:
      required:
      - clarified
      type: object
      properties:
        clarified:
          type: boolean
          description: Flag that is set by the Reviewer
    Out5:
      required:
      - archived
      type: object
      properties:
        archived:
          type: boolean
    Software License Costs:
      type: object
    Travel Expenses:
      type: object
    accounting:
      type: object
    management:
      type: object
    sales:
      type: object
